{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";;;AACA,+CAA+D;AAU/D,SAAgB,YAAY,CAAkB,KAAQ;IAErD,IAAI,EAAE,GAAG,IAAA,yBAAU,EAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;IAEhD,OAAO;QACN,MAAM,EAAE,IAAA,kCAAmB,EAAC,EAAE,CAAC,GAAG,IAAI;QACtC,OAAO,EAAE,EAAE,CAAC,OAAO;QACnB,KAAK,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;QAC7B,KAAK;KACL,CAAA;AACF,CAAC;AAVD,oCAUC;AAED,SAAgB,kBAAkB,CAAC,IAA4D,EAAE,KAAc;IAE9G,KAAK,aAAL,KAAK,cAAL,KAAK,IAAL,KAAK,GAAK,IAAI,CAAC,KAAK,EAAC;IAErB,IAAI,KAAK,CAAC,MAAM,EAChB;QACC,KAAK,GAAG,KAAK,KAAK,EAAE,CAAC;KACrB;IAED,OAAO,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,GAAG,KAAK,EAAE,CAAA;AAC/C,CAAC;AAVD,gDAUC;AAED,kBAAe,YAAY,CAAA","sourcesContent":["import { ITSPickExtra } from 'ts-type';\nimport { parseStack, formatMessagePrefix } from 'error-stack2';\n\nexport interface IErrStackMeta<E extends Error>\n{\n\tprefix: string;\n\tmessage: string;\n\tstack: string;\n\terror: E;\n}\n\nexport function errStackMeta<E extends Error>(error: E): IErrStackMeta<E>\n{\n\tlet es = parseStack(error.stack, error.message);\n\n\treturn {\n\t\tprefix: formatMessagePrefix(es) + ': ',\n\t\tmessage: es.message,\n\t\tstack: es.rawTrace.join('\\n'),\n\t\terror,\n\t}\n}\n\nexport function stringifyStackMeta(meta: ITSPickExtra<IErrStackMeta<any>, 'prefix' | 'message'>, stack?: string)\n{\n\tstack ??= meta.stack;\n\n\tif (stack.length)\n\t{\n\t\tstack = `\\n${stack}`;\n\t}\n\n\treturn `${meta.prefix}${meta.message}${stack}`\n}\n\nexport default errStackMeta\n"]}